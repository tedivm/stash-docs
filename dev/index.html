<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
  
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Stash &mdash; Stash 0.12.1 documentation</title>
    
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.12.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Stash 0.12.1 documentation" href="#" />
    <link rel="next" title="Overview" href="Overview.html" />
    <link rel="prev" title="Stash Documentation" href="Contents.html" />
  
   

  </head>
  <body>
<nav class="navbar navbar-default navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="visible-md visible-lg navbar-text pull-right" id="github-stars">
      <iframe src="http://ghbtns.com/github-btn.html?user=tedivm&repo=stash&type=watch&count=true&size=small"
      allowtransparency="true" frameborder="0" scrolling="0" width="110px" height="20px"></iframe>
    </div>
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#toggle-main-nav">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="
    
      #">Stash</a>
    </div>
    <div class="collapse navbar-collapse" id="toggle-main-nav">
      <ul class="nav navbar-nav">
          <li><a href="
      #">Home</a></li>
          <li><a href="https://github.com/tedivm/stash">Github</a></li>
            
              <li><a href="http://blog.tedivm.com">Blog</a></li>
            
        
      </ul>
    </div>
  </div>
</nav>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Overview.html" title="Overview"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Contents.html" title="Stash Documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="Contents.html">Stash 0.12.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="container-wrapper">
        <div class="container-fluid">
            
    <div class="top-links">
      <ul class="breadcrumb pull-right">
        <li>
          <a href="Contents.html" title="previous chapter (use the left arrow)">&larr; Stash Documentation</a>
          <span class="divider"></span>
          
        </li>
          <li><a href="Overview.html" title="next chapter (use the right arrow)">Overview &rarr;</a></li>
      </ul>
    </div>
  
            <div class="row document clearer">
  <div class="col-md-3 sphinxsidebar">
    <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="
      #">
          <img class="logo" src="_static/tedivmGlider.png" alt="Logo"/>
        </a></p>
<div class="panel panel-default">
  <div class="panel-heading">
    <h3><a href="
    
      #">Table Of Contents</a></h3>
  </div>
  <div class="panel-body panel-toc panel-globaltoc">
    <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Stash</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-usage">Example Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license">License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="Basics.html">Basic Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="Grouping.html">Groupings</a></li>
<li class="toctree-l1"><a class="reference internal" href="Invalidation.html">Invalidation</a></li>
<li class="toctree-l1"><a class="reference internal" href="API.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="Drivers.html">Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Integration.html">Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="Extending.html">Extending</a></li>
<li class="toctree-l1"><a class="reference internal" href="AddingDrivers.html">Adding Drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="Contributing.html">Contributing</a></li>
</ul>

  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Search</h3>
  </div>
  <div class="panel-body">
    <form class="form-inline" action="search.html" method="get" role="form">
      <div class="input-group">
        <input name="q" type="text" class="form-control">
        <span class="input-group-btn">
          <button class="btn btn-default" type="button">Go</button>
        </span>
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
  </div>
</div>
    </div>
  </div>
                <div class="col-md-9 body">
                  
  <div class="section" id="stash">
<span id="overview"></span><h1>Stash<a class="headerlink" href="#stash" title="Permalink to this headline">¶</a></h1>
<p>Stash makes it easy to speed up your code by caching the results of expensive functions or code. Certain actions, like database queries or calls to external APIs, take a lot of time to run but tend to have the same results over short periods of time. This makes it much more efficient to store the results and call them back up later.</p>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><strong>Stores all PHP Datatypes</strong></dt>
<dd>Stash can store all of the php native datatypes- integers, booleans, null,
strings, arrays and objects that can be serialized.</dd>
<dt><strong>Hierarchal Cache</strong></dt>
<dd>Stored items can be nested, like the folders of a filesystem. This allows
for related items to be groups together and erased when changed. Storing a
user's basic information can be nested 'users/userId/info', allow all of the
user's information to be removed quite easily.</dd>
<dt><strong>Interchangeable Back Ends</strong></dt>
<dd>Stash can use a number of different storage engines to persist cache items
between requests. Current drivers include Filesystem, APC, Memcached, and
Sqlite drivers.</dd>
<dt><strong>Staggered Drivers</strong></dt>
<dd>It occasionally makes sense to use multiple backends- for example, you may
have a small amount of memory to allot but a large piece of filesystem, in
which case using APC and the FileSystem driver together is an ideal
solution. Stash allows you to do this using the special backend,
MultiDriver, which can take an unlimited number of drivers.</dd>
<dt><strong>Stampede Protection</strong></dt>
<dd>When a particularly expensive to generate item misses it can cause a chain
reaction- the system slows down as it generates the cache, but the longer it
takes the more processes that miss and start regenerating it. Stash gives
the developer the ability to limit cache regeneration to a single process,
as well as an assortment of ways to handle misses.</dd>
<dt><strong>Regenerates Before Expiration</strong></dt>
<dd>Stash gives developers the option to regenerate a cached item before it
misses, making sure that up to data is always available while limiting
expensive code to running one instance at a time.</dd>
<dt><strong>Distributed Cache Misses</strong></dt>
<dd>In order to reduce sudden spikes on a system Stash alters the expiration
times by lowering the cache age a random amount, thus distributing the cache
hits over a period of time.</dd>
<dt><strong>Optimized Data Encoding</strong></dt>
<dd>Care is taken to use the fastest possible encoding and decoding functions
when storing data, with the preference being to store things in their native
data type. Serialization is reserved only for objects or deep
multidimensional arrays where breaking down each component individually
would be too long.</dd>
<dt><strong>Comprehensively Unit Tested</strong></dt>
<dd>Every driver, class and wrapper is extensively tested. This includes using a
variety of datatypes and ranges in order to ensure that the data you put in
is the data you get out.</dd>
</dl>
</div>
<div class="section" id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="Permalink to this headline">¶</a></h2>
<p>Stash functions as a key-value store: you place things into the cache using a key and you retrieve them using the same key.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="nv">$item</span> <span class="o">=</span> <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">getItem</span><span class="p">(</span><span class="s1">&#39;fruit&#39;</span><span class="p">);</span>
<span class="nv">$item</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;apple&#39;</span><span class="p">);</span>

<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">());</span>
<span class="c1">// string(6) &quot;apples&quot;</span>
</pre></div>
</div>
<p>This works between requests as well.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="c1">// First Request</span>
<span class="nv">$item</span> <span class="o">=</span> <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">getItem</span><span class="p">(</span><span class="s1">&#39;fruit&#39;</span><span class="p">);</span>
<span class="nv">$item</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;apple&#39;</span><span class="p">);</span>

<span class="c1">// Second Request</span>
<span class="nv">$item</span> <span class="o">=</span> <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">getItem</span><span class="p">(</span><span class="s1">&#39;fruit&#39;</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">());</span>
<span class="c1">// string(6) &quot;apples&quot;</span>
</pre></div>
</div>
<p>Putting this together with the rest of Stash allows for a simple yet flexible way to speed up scripts by reusing data.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">getUserInfo</span><span class="p">(</span><span class="nv">$userId</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$pool</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cachePool</span><span class="p">;</span>

    <span class="c1">// Get a Stash object from the cache pool.</span>
    <span class="nv">$item</span> <span class="o">=</span> <span class="nv">$pool</span><span class="o">-&gt;</span><span class="na">getItem</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="nv">$userId</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">);</span>

    <span class="c1">// Get the date from it, if any happens to be there.</span>
    <span class="nv">$userInfo</span> <span class="o">=</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">();</span>

    <span class="c1">// Check to see if the cache missed, which could mean that it either</span>
    <span class="c1">// didn&#39;t exist or was stale.</span>
    <span class="k">if</span><span class="p">(</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="na">isMiss</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="c1">// Run the relatively expensive code.</span>
        <span class="nv">$userInfo</span> <span class="o">=</span> <span class="nx">loadUserInfoFromDatabase</span><span class="p">(</span><span class="nv">$userId</span><span class="p">);</span>

        <span class="c1">// Store the expensive code so the next time it doesn&#39;t miss.</span>
        <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$userInfo</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nv">$userInfo</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">saveUserInfo</span><span class="p">(</span><span class="nv">$userId</span><span class="p">,</span> <span class="nv">$infoArray</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Save the data- dumped behind a function just for the example.</span>
    <span class="nx">saveDataToDatabase</span><span class="p">(</span><span class="nv">$userId</span><span class="p">,</span> <span class="nv">$infoArray</span><span class="p">);</span>

    <span class="c1">// Clear out the now invalid data from the cache.</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">cachePool</span><span class="o">-&gt;</span><span class="na">clear</span><span class="p">(</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="nv">$userId</span><span class="p">,</span> <span class="s1">&#39;info&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For an in-depth look at using Stash take a look at <a class="reference internal" href="Basics.html"><em>Basic Usage</em></a>
and <a class="reference internal" href="Drivers.html"><em>Drivers</em></a>.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>Stash is licensed under the New BSD License. This means you are free to use it
in any of your projects, proprietary or open source. While you aren't obligated
to contribute back, any bug fixes or enhancements are appreciated -- besides,
getting your code into the main branch is so much easier than maintaining your
own fork.</p>
</div>
</div>


                </div>
              <div class="clearfix"></div>
            </div>
            
    <div class="footer-links">
      <ul class="breadcrumb pull-right">
        <li>
          <a href="Contents.html" title="previous chapter (use the left arrow)">&larr; Stash Documentation</a>
          <span class="divider"></span>
          
        </li>
          <li><a href="Overview.html" title="next chapter (use the right arrow)">Overview &rarr;</a></li>
      </ul>
    </div>
  

        </div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Overview.html" title="Overview"
             >next</a> |</li>
        <li class="right" >
          <a href="Contents.html" title="Stash Documentation"
             >previous</a> |</li>
        <li><a href="Contents.html">Stash 0.12.1 documentation</a> &raquo;</li> 
      </ul>
    </div>

  <script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer container">
    &copy; Copyright 2014, Robert Hafner. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-29779027-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>